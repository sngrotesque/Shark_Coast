### PNG

块的数据结构：[块长度][块名称][块内容][块CRC]

- 块长度
用4字节表示，不包括块名称和CRC32值，范围为[0, 2^32-1]
- 块名称
用4字节表示，必要的有IDAT，IHDR，IEND。
- 块内容
通常不固定长度，块长度必须与此内容的长度一致。
- 块CRC
用4字节表示，由zlib库提供的CRC32校验。
用于校验[块名称][块内容]的CRC32值。

##### 文件部分数据解析
```text
89 50 4E 47 0D 0A 1A 0A                代表此文件头部，表明此为PNG图像文件。
00 00 00 0D                            代表当前块的长度。
49 48 44 52                            代表此块的类型(IHDR)。
00 00 03 20                            代表此图像的宽度。
00 00 01 90                            代表此图像的高度。
08                                     代表此图像的位深。
02                                     代表此图像的颜色类型。
00                                     压缩方法，LZ77派生算法（目前仅定义了0）。
00                                     滤波器方法，（目前仅定义了0）。
00                                     隔行扫描方法，0为非隔行扫描，1为Adam7隔行扫描方法。
D9 47 93 63                            代表CRC校验值。
00 00 00 00 49 45 4E 44 AE 42 60 82    代表文件末尾，表示此文件已结束。
```

| Color Type | Allowed Bit depths | Interpretation                                                 |
| --         | --                 | --                                                             |
| 0          | 1,2,4,8,16         | 每个像素都是一个灰度样本。                                   |
| 2          | 8,16               | 每个像素都是R、G、B三元组。                                  |
| 3          | 1,2,4,8            | 每个像素都是一个调色板索引；PLTE区块必须出现。              |
| 4          | 8,16               | 每个像素都是一个灰度样本，后面跟着一个alpha样本。           |
| 6          | 8,16               | 每个像素是一个R、G、B三元组，后面跟着一个alpha样本。        |

| Type   | Necessity | Interpretation |
| -      | -         | -                                           |
| IHDR   | 1         | 文件头数据块                               |
| PLTE   | 0         | 调色板块（并未实际在PNG图像中找到过此块）|
| IDAT   | 1         | 图像数据块                                 |
| IEND   | 1         | 图像结束块                                 |
| bKGD   | 0         | 背景颜色数据块                             |
| cHRM   | 0         | 基色和白色度数据块                         |
| gAMA   | 0         | 图像γ数据块                                |
| hIST   | 0         | 图像直方图数据块                           |
| iCCP   | 0         | 嵌入式ICC配置文件块                        |
| iTXt   | 0         | 国际文本数据块                             |
| pHYs   | 0         | 物理像素尺寸数据块                         |
| sBIT   | 0         | 样本有效位数据块                           |
| sRGB   | 0         | 颜色空间块                                 |
| sPLT   | 0         | 建议调色板块                               |
| tEXt   | 0         | 文本信息数据块                             |
| tIME   | 0         | 图像最后修改时间数据块                     |
| tRNS   | 0         | 图像透明数据块                             |
| zTXt   | 0         | 压缩文本数据块                             |

##### IDAT
```text
IDAT内的数据经过zlib库的压缩，函数为compress。
位深为08时，颜色类型06有四个通道，是RGBA，每个通道占1字节总共32位。
位深为08时，颜色类型02有三个通道，是RGB，每个通道占1字节总共24位。
在每一行像素开始分布前，都会有一个过滤器字节(0为不过滤)。

在RGB通道的基础上，拥有alpha（透明）通道的单个像素占用4字节，为32位。
在RGB通道的基础上，不拥有alpha（透明）通道的单个像素占用3字节，为24位。
```
